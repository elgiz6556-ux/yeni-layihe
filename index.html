<style>
    /* Menyunun ekranı tam örtməsi və öndə olması üçün */
    .sidebar { 
        position: fixed; 
        left: -100%; 
        top: 0; 
        width: 80%; /* Mobil üçün daha rahat ölçü */
        max-width: 300px;
        height: 100%; 
        background: #161b22; 
        z-index: 9999; /* Hər şeydən öndə olması üçün */
        transition: 0.4s ease-in-out; 
        padding: 20px; 
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
    }
    
    .sidebar.open { left: 0; }

    /* Bağla düyməsini aşağıya bərkitmək üçün */
    .close-area { margin-top: auto; padding-bottom: 20px; }

    .sidebar-item { 
        padding: 15px; 
        background: rgba(255,255,255,0.05); 
        border-radius: 12px; 
        margin-bottom: 10px; 
        cursor: pointer; 
        border: 1px solid rgba(255,255,255,0.1); 
        text-align: center; 
        font-weight: bold;
        transition: 0.2s;
    }
    .sidebar-item:active { transform: scale(0.95); background: var(--accent); color: #000; }
</style>

<div id="group-sidebar" class="sidebar">
    <h3 style="text-align: center; margin-bottom: 20px;">Qruplar</h3>
    <div class="plus-btn" onclick="createNewGroup()" style="text-align:center; font-size:40px; color:var(--accent); cursor:pointer;">+</div>
    <p style="text-align: center; font-size: 12px; opacity: 0.6; margin-bottom: 20px;">Yeni otaq yaratmaq üçün basın</p>
    
    <div id="my-groups-list" style="overflow-y: auto; flex: 1;">
        </div>

    <div class="close-area">
        <button onclick="closeAllSidebars()" style="width: 100%; padding: 15px; background: #333; border: none; color: white; border-radius: 12px; font-weight: bold; cursor: pointer;">Bağla</button>
    </div>
</div>

<script>
    // Bütün menyuları bağlamaq üçün xüsusi funksiya
    function closeAllSidebars() {
        const sidebars = document.querySelectorAll('.sidebar');
        sidebars.forEach(s => {
            s.classList.remove('open');
        });
    }

    // Mövcud toggleSidebar funksiyasını bununla əvəz et:
    function toggleSidebar(id) {
        const target = document.getElementById(id);
        const isOpen = target.classList.contains('open');
        
        closeAllSidebars(); // Əvvəlcə hamısını bağla
        
        if (!isOpen) {
            target.classList.add('open'); // Əgər bağlı idisə, aç
        }
    }

    // createNewGroup içində də bağlamanı təmin edək
    function createNewGroup() {
        let name = prompt("Qrup adını yazın:");
        if(name) {
            if(!myGroups.includes(name)) {
                myGroups.push(name);
                localStorage.setItem('my_groups', JSON.stringify(myGroups));
                updateGroupList();
            }
            changeRoom(name);
            closeAllSidebars(); // Qrup seçiləndə menyunu bağla
        }
    }
</script>
 
